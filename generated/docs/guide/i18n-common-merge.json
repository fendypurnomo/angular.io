{
  "id": "guide/i18n-common-merge",
  "title": "Merge translations into the application",
  "contents": "\n\n\n<div class=\"github-links\">\n  <a href=\"https://github.com/angular/angular/edit/master/aio/content/guide/i18n-common-merge.md?message=docs%3A%20describe%20your%20change...\" aria-label=\"Suggest Edits\" title=\"Suggest Edits\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n</div>\n\n\n<div class=\"content\">\n  <h1 id=\"merge-translations-into-the-application\">Merge translations into the application<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/i18n-common-merge#merge-translations-into-the-application\"><i class=\"material-icons\">link</i></a></h1>\n<a id=\"merge\"></a>\n<a id=\"merge-aot\"></a>\n<p>To merge the completed translations into your application, use the <a href=\"guide/glossary#command-line-interface-cli\" title=\"command-line interface (CLI) - Glossary | Angular\">Angular CLI</a> to build a copy of the distributable files of your application for each locale.</p>\n<p>The build process replaces the original text with translated text, and sets the <code><a href=\"api/core/LOCALE_ID\" class=\"code-anchor\">LOCALE_ID</a></code> token for each distributable copy of your application.\nIt also loads and registers the locale data.</p>\n<p>After you merge the translations, serve each distributable copy of the application using server-side language detection or different subdirectories.\nFor more information about how to serve each distributable copy of the application, see <a href=\"guide/i18n-common-deploy\" title=\"Deploy multiple locales | Angular\">deploying multiple locales</a>.</p>\n<p>The build process uses <a href=\"guide/glossary#ahead-of-time-aot-compilation\" title=\"ahead-of-time (AOT) compilation - Glossary | Angular\">ahead-of-time (AOT) compilation</a> to produce a small, fast, ready-to-run application.\nWith Ivy in Angular version 9, AOT is used by default for both development and production builds, and AOT is required to localize component templates.</p>\n<div class=\"alert is-helpful\">\n<p>For a detailed explanation of the build process, see <a href=\"guide/build\" title=\"Building and serving Angular apps | Angular\">Building and serving Angular apps</a>.\nThis build process works for translation files in the <code>.xlf</code> format or in another format that Angular understands, such as <code>.xtb</code>.</p>\n</div>\n<div class=\"alert is-important\">\n<p>Ivy does not support merging i18n translations when using JIT mode.\nIf you <a href=\"guide/ivy#opting-out-of-ivy-in-version-9\" title=\"Opting out of Ivy in version 9 - Angular Ivy | Angular\">disable Ivy</a> and are using JIT mode, navigate [merging with the JIT compiler][AngularV8GuideI18nMergeWithTheJitCompiler].</p>\n</div>\n<p>To build a separate distributable copy of the application for each locale, <a href=\"guide/i18n-common-merge#define-locales-in-the-build-configuration\" title=\"Define locales in the build configuration - Merge translations into the application | Angular\">define the locales in the build configuration</a> in the workspace configuration file <a href=\"guide/workspace-config\" title=\"Angular workspace configuration | Angular\"><code>angular.json</code></a> of your project.</p>\n<p>This method shortens the build process by removing the requirement to perform a full application build for each locale.</p>\n<p>Then, to <a href=\"guide/i18n-common-merge#generate-application-versions-for-each-locale\" title=\"Generate application versions for each locale - Merge translations into the application | Angular\">generate application versions for each locale</a>, use the <code>\"localize\"</code> option in <code>angular.json</code>.\nAlso, to <a href=\"guide/i18n-common-merge#build-from-the-command-line\" title=\"Build from the command line - Merge translations into the application | Angular\">build from the command line</a>, use the <a href=\"cli/build\" title=\"ng build | CLI | Angular\"><code>build</code></a> Angular CLI command with the <code>--localize</code> option.</p>\n<div class=\"alert is-helpful\">\n<p>Optionally, <a href=\"guide/i18n-common-merge#apply-specific-build-options-for-just-one-locale\" title=\"Apply specific build options for just one locale - Merge translations into the application | Angular\">apply specific build options for just one locale</a> for a custom locale configuration.</p>\n</div>\n<h3 id=\"define-locales-in-the-build-configuration\">Define locales in the build configuration<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/i18n-common-merge#define-locales-in-the-build-configuration\"><i class=\"material-icons\">link</i></a></h3>\n<a id=\"localize-config\"></a>\n<p>Use the <code>i18n</code> project option in the build configuration file (<a href=\"guide/workspace-config\" title=\"Angular workspace configuration | Angular\"><code>angular.json</code></a>) of your application to define locales for a project.</p>\n<p>The following sub-options identify the source language and tell the compiler where to find supported translations for the project:</p>\n<ul>\n<li><code>sourceLocale</code>: The locale you use within the application source code (<code>en-US</code> by default)</li>\n<li><code>locales</code>: A map of locale identifiers to translation files</li>\n</ul>\n<p>For example, the following excerpt of an <code>angular.json</code> file sets the source locale to <code>en-US</code> and provides the path to the <code>fr</code> (French) locale translation file:</p>\n<code-example language=\"json\" header=\"angular.json\" path=\"i18n/angular.json\" region=\"locale-config\">\n  \"projects\": {\n    \"angular.io-example\": {\n      // ...\n      \"i18n\": {\n        \"sourceLocale\": \"en-US\",\n        \"locales\": {\n          \"fr\": \"src/locale/messages.fr.xlf\",\n          // ...\n        }\n      },\n      \"architect\": {\n        // ...\n      }\n    }\n  },\n  \"defaultProject\": \"angular.io-example\"\n}\n\n</code-example>\n<h3 id=\"generate-application-versions-for-each-locale\">Generate application versions for each locale<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/i18n-common-merge#generate-application-versions-for-each-locale\"><i class=\"material-icons\">link</i></a></h3>\n<a id=\"localize-generate\"></a>\n<p>To use your locale definition in the build configuration, use the <code>\"localize\"</code> option in <code>angular.json</code> to tell the CLI which locales to generate for the build configuration:</p>\n<ul>\n<li>Set <code>\"localize\"</code> to <code>true</code> for <em>all</em> the locales previously defined in the build configuration.</li>\n<li>Set <code>\"localize\"</code> to an array of a subset of the previously defined locale identifiers to build only those locale versions.</li>\n<li>Set <code>\"localize\"</code> to <code>false</code> to disable localization and not generate any locale-specific versions.</li>\n</ul>\n<div class=\"alert is-helpful\">\n<p><strong>NOTE</strong>: <a href=\"guide/glossary#ahead-of-time-aot-compilation\" title=\"ahead-of-time (AOT) compilation - Glossary | Angular\">Ahead-of-time (AOT) compilation</a> is required to localize component templates.</p>\n<p>If you changed this setting, set <code>\"aot\"</code> to <code>true</code> in order to use AOT.</p>\n</div>\n<p>The following example displays the <code>\"localize\"</code> option set to <code>true</code> in <code>angular.json</code>, so that all locales defined in the build configuration are built.</p>\n<code-example language=\"json\" header=\"angular.json\" path=\"i18n/angular.json\" region=\"build-localize-true\">\n\"build\": {\n  \"builder\": \"@angular-devkit/build-angular:browser\",\n  \"options\": {\n    \"localize\": true,\n    // ...\n  },\n\n</code-example>\n<div class=\"alert is-helpful\">\n<p>Due to the deployment complexities of i18n and the need to minimize rebuild time, the development server only supports localizing a single locale at a time.\nIf you set the <code>\"localize\"</code> option to <code>true</code>, define more than one locale, and use <code>ng serve</code>; then an error occurs.\nIf you want to develop against a specific locale, set the <code>\"localize\"</code> option to a specific locale.<br>\nFor example, for French (<code>fr</code>), specify <code>\"localize\": [\"fr\"]</code>.</p>\n</div>\n<p>The CLI loads and registers the locale data, places each generated version in a locale-specific directory to keep it separate from other locale versions, and puts the directories within the configured <code>outputPath</code> for the project.\nFor each application variant the <code>lang</code> attribute of the <code>html</code> element is set to the locale.\nThe CLI also adjusts the HTML base HREF for each version of the application by adding the locale to the configured <code>baseHref</code>.</p>\n<p>Set the <code>\"localize\"</code> property as a shared configuration to effectively inherit for all the configurations.\nAlso, set the property to override other configurations.</p>\n<h3 id=\"build-from-the-command-line\">Build from the command line<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/i18n-common-merge#build-from-the-command-line\"><i class=\"material-icons\">link</i></a></h3>\n<a id=\"localize-build-command\"></a>\n<p>Also, use the <code>--localize</code> option with the <a href=\"cli/build\" title=\"ng build | CLI | Angular\"><code>ng build</code></a> command and your existing <code>production</code> configuration.\nThe CLI builds all locales defined in the build configuration.\nIf you set the locales in build configuration, it is similar to when you set the <code>\"localize\"</code> option to <code>true</code>.\nFor more information about how to set the locales, see <a href=\"guide/i18n-common-merge#generate-application-versions-for-each-locale\" title=\"Generate application versions for each locale - Merge translations into the application | Angular\">Generate application versions for each locale</a>.</p>\n<code-example path=\"i18n/doc-files/commands.sh\" region=\"build-localize\" language=\"sh\">\nng build --localize\n\n</code-example>\n<h3 id=\"apply-specific-build-options-for-just-one-locale\">Apply specific build options for just one locale<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/i18n-common-merge#apply-specific-build-options-for-just-one-locale\"><i class=\"material-icons\">link</i></a></h3>\n<a id=\"localize-build-one-locale\"></a>\n<p>To apply specific build options to only one locale, specify a single locale to create a custom locale-specific configuration.\nThe following example displays a custom locale-specific configuration using a single locale.</p>\n<code-example language=\"json\" header=\"angular.json\" path=\"i18n/angular.json\" region=\"build-single-locale\">\n  \"build\": {\n    // ...\n    \"configurations\": {\n      // ...\n      \"fr\": {\n        \"localize\": [\n          \"fr\"\n        ]\n      }\n    },\n    // ...\n  },\n  \"serve\": {\n    \"builder\": \"@angular-devkit/build-angular:dev-server\",\n    \"configurations\": {\n      // ...\n      \"fr\": {\n        \"browserTarget\": \"angular.io-example:build:fr\"\n      }\n    },\n    // ...\n  },\n  // ...\n}\n\n</code-example>\n<p>Pass this configuration to the <code>ng serve</code> or <code>ng build</code> commands.\nThe following code example displays how to serve the French language file.</p>\n<code-example path=\"i18n/doc-files/commands.sh\" region=\"serve-french\" language=\"sh\">\nng serve --configuration=fr\n\n</code-example>\n<div class=\"alert is-important\">\n<p>Use the CLI development server (<code>ng serve</code>) with only a single locale.</p>\n</div>\n<p>For production builds, use configuration composition to run both configurations.</p>\n<code-example path=\"i18n/doc-files/commands.sh\" region=\"build-production-french\" language=\"sh\">\nng build --configuration=production,fr\n\n</code-example>\n<code-example language=\"json\" header=\"angular.json\" path=\"i18n/angular.json\" region=\"build-production-french\">\n\"architect\": {\n  \"build\": {\n    \"builder\": \"@angular-devkit/build-angular:browser\",\n    \"options\": {\n      // ...\n    },\n    \"configurations\": {\n      // ...\n      \"fr\": {\n        \"localize\": [\n          \"fr\"\n        ]\n      }\n    },\n    // ...\n  },\n  \"serve\": {\n    \"builder\": \"@angular-devkit/build-angular:dev-server\",\n    \"configurations\": {\n      \"production\": {\n        \"browserTarget\": \"angular.io-example:build:production\"\n      },\n      // ...\n      \"fr\": {\n        \"browserTarget\": \"angular.io-example:build:fr\"\n      }\n    },\n    // ...\n  },\n  // ...\n}\n\n</code-example>\n<h3 id=\"report-missing-translations\">Report missing translations<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/i18n-common-merge#report-missing-translations\"><i class=\"material-icons\">link</i></a></h3>\n<a id=\"missing-translation\"></a>\n<p>When a translation is missing, the build succeeds but generates a warning such as <code>Missing translation for message \"{translation_text}\"</code>.\nTo configure the level of warning that is generated by the Angular compiler, specify one of the following levels.</p>\n<ul>\n<li><code>error</code>: Throw an error.\nIf you are using AOT compilation, the build will fail.\nIf you are using JIT compilation, the application will fail to load.</li>\n<li><code>warning</code> (default): Displays a <code>Missing translation</code> warning in the console or shell.</li>\n<li><code>ignore</code>: Do nothing.</li>\n</ul>\n<p>Specify the warning level in the <code>options</code> section for the <code>build</code> target of your Angular CLI configuration file (<code>angular.json</code>).\nThe following example displays how to set the warning level to <code>error</code>.</p>\n<code-example language=\"json\" header=\"angular.json\" path=\"i18n/angular.json\" region=\"missing-translation-error\">\n\"build\": {\n  \"builder\": \"@angular-devkit/build-angular:browser\",\n  \"options\": {\n    // ...\n    \"i18nMissingTranslation\": \"error\"\n  },\n\n</code-example>\n<!-- links -->\n<!-- external links -->\n<!--[AngularV8GuideI18nMergeWithTheJitCompiler]: https://v8.angular.io/guide/i18n-common#merge-translations-into-the-app-with-the-jit-compiler \"Merge with the JIT compiler - Internationalization (i18n) | Angular v8\" -->\n<!-- end links -->\n\n  <div class=\"reviewed\">Last reviewed on Wed Sep 15 2021</div>\n</div>\n\n<!-- links to this doc:\n - api/core/MissingTranslationStrategy\n - api/core/TRANSLATIONS\n - api/core/TRANSLATIONS_FORMAT\n - guide/deprecations\n - guide/i18n-common\n - guide/i18n-common-locale-id\n - guide/ivy\n - guide/workspace-config\n-->\n<!-- links from this doc:\n - api/core/LOCALE_ID\n - cli/build\n - guide/build\n - guide/glossary#ahead-of-time-aot-compilation\n - guide/glossary#command-line-interface-cli\n - guide/i18n-common-deploy\n - guide/i18n-common-merge#apply-specific-build-options-for-just-one-locale\n - guide/i18n-common-merge#build-from-the-command-line\n - guide/i18n-common-merge#define-locales-in-the-build-configuration\n - guide/i18n-common-merge#generate-application-versions-for-each-locale\n - guide/i18n-common-merge#merge-translations-into-the-application\n - guide/i18n-common-merge#report-missing-translations\n - guide/ivy#opting-out-of-ivy-in-version-9\n - guide/workspace-config\n - https://github.com/angular/angular/edit/master/aio/content/guide/i18n-common-merge.md?message=docs%3A%20describe%20your%20change...\n-->"
}