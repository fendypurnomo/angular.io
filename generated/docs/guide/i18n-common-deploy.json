{
  "id": "guide/i18n-common-deploy",
  "title": "Deploy multiple locales",
  "contents": "\n\n\n<div class=\"github-links\">\n  <a href=\"https://github.com/angular/angular/edit/master/aio/content/guide/i18n-common-deploy.md?message=docs%3A%20describe%20your%20change...\" aria-label=\"Suggest Edits\" title=\"Suggest Edits\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n</div>\n\n\n<div class=\"content\">\n  <h1 id=\"deploy-multiple-locales\">Deploy multiple locales<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/i18n-common-deploy#deploy-multiple-locales\"><i class=\"material-icons\">link</i></a></h1>\n<a id=\"deploy-locales\"></a>\n<p>If <code>myapp</code> is the directory containing the distributable files of your application, you would typically make available different versions for different locales in locale directories such as <code>myapp/fr</code> for the French version and <code>myapp/es</code> for the Spanish version.</p>\n<p>The HTML <code>base</code> tag with the <code>href</code> attribute specifies the base URI, or URL, for relative links.\nIf you set the <code>\"localize\"</code> option in <code>angular.json</code> to <code>true</code> or to an array of locale IDs, the CLI adjusts the base <code>href</code> for each version of the application.\nTo adjust the base <code>href</code> for each version of the application, the CLI adds the locale to the configured <code>\"baseHref\"</code>.\nSpecify the <code>\"baseHref\"</code> for each locale in your workspace configuration file (<code>angular.json</code>).\nThe following example displays <code>\"baseHref\"</code> set to an empty string.</p>\n<code-example language=\"json\" header=\"angular.json\" path=\"i18n/angular.json\" region=\"i18n-baseHref\">\n  \"projects\": {\n    \"angular.io-example\": {\n      // ...\n      \"i18n\": {\n        \"sourceLocale\": \"en-US\",\n        \"locales\": {\n          \"fr\": \"src/locale/messages.fr.xlf\",\n          \"baseHref\": \"\"\n        }\n      },\n      \"architect\": {\n        // ...\n      }\n    }\n  },\n  // ...\n}\n\n</code-example>\n<p>Also, to declare the base <code>href</code> at compile time, use the CLI <code>--baseHref</code> option with <a href=\"cli/build\" title=\"ng build | CLI | Angular\"><code>ng build</code></a>.</p>\n<h3 id=\"configuring-servers\">Configuring servers<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/i18n-common-deploy#configuring-servers\"><i class=\"material-icons\">link</i></a></h3>\n<p>Typical deployment of multiple languages serve each language from a different subdirectory.\nUsers are redirected to the preferred language defined in the browser using the <code>Accept-Language</code> HTTP header.\nIf the user has not defined a preferred language, or if the preferred language is not available, then the server falls back to the default language.\nTo change the language, see another subdirectory.<br>\nThe change of subdirectory often occurs using a menu implemented in the application.</p>\n<p>For more information on how to deploy apps to a remote server, see <a href=\"guide/deployment\" title=\"Deployment | Angular\">Deployment</a>.</p>\n<h4 id=\"nginx\">Nginx<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/i18n-common-deploy#nginx\"><i class=\"material-icons\">link</i></a></h4>\n<p>The following example displays an Nginx configuration.</p>\n<code-example path=\"i18n/doc-files/nginx.conf\" language=\"nginx\">\n<a href=\"api/common/http\" class=\"code-anchor\">http</a> {\n    # Browser preferred language detection (does NOT require\n    # AcceptLanguageModule)\n    map $http_accept_language $accept_language {\n        ~*^de de;\n        ~*^fr fr;\n        ~*^en en;\n    }\n    # ...\n}\n\nserver {\n    listen 80;\n    server_name localhost;\n    root /www/data;\n\n    # Fallback to default language if no preference defined by <a href=\"api/animations/browser\" class=\"code-anchor\">browser</a>\n    if ($accept_language ~ \"^$\") {\n        set $accept_language \"fr\";\n    }\n\n    # Redirect \"/\" to Angular application in the preferred language of the <a href=\"api/animations/browser\" class=\"code-anchor\">browser</a>\n    rewrite ^/$ /$accept_language permanent;\n\n    # Everything under the Angular application is always redirected to Angular in the\n    # correct language\n    location ~ ^/(fr|de|en) {\n        try_files $uri /$1/index.html?$args;\n    }\n    # ...\n}\n\n\n</code-example>\n<h4 id=\"apache\">Apache<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/i18n-common-deploy#apache\"><i class=\"material-icons\">link</i></a></h4>\n<p>The following example displays an Apache configuration.</p>\n<code-example path=\"i18n/doc-files/apache2.conf\" language=\"apache\">\n&#x3C;VirtualHost *:80>\n    ServerName localhost\n    DocumentRoot /www/data\n    &#x3C;Directory \"/www/data\">\n        RewriteEngine on\n        RewriteBase /\n        RewriteRule ^../index\\.html$ - [L]\n\n        RewriteCond %{REQUEST_FILENAME} !-f\n        RewriteCond %{REQUEST_FILENAME} !-d\n        RewriteRule (..) $1/index.html [L]\n\n        RewriteCond %{HTTP:Accept-Language} ^de [NC]\n        RewriteRule ^$ /de/ [R]\n\n        RewriteCond %{HTTP:Accept-Language} ^en [NC]\n        RewriteRule ^$ /en/ [R]\n\n        RewriteCond %{HTTP:Accept-Language} !^en [NC]\n        RewriteCond %{HTTP:Accept-Language} !^de [NC]\n        RewriteRule ^$ /fr/ [R]\n    &#x3C;/Directory>\n&#x3C;/VirtualHost>\n\n\n</code-example>\n<!-- links -->\n<!-- external links -->\n<!-- end links -->\n\n  <div class=\"reviewed\">Last reviewed on Wed Sep 15 2021</div>\n</div>\n\n<!-- links to this doc:\n - guide/i18n-common\n - guide/i18n-common-merge\n-->\n<!-- links from this doc:\n - api/animations/browser\n - api/common/http\n - cli/build\n - guide/deployment\n - guide/i18n-common-deploy#apache\n - guide/i18n-common-deploy#configuring-servers\n - guide/i18n-common-deploy#deploy-multiple-locales\n - guide/i18n-common-deploy#nginx\n - https://github.com/angular/angular/edit/master/aio/content/guide/i18n-common-deploy.md?message=docs%3A%20describe%20your%20change...\n-->"
}